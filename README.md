# Persistence Testbed: Labview Interface #

**This repository contains Labview VIs for acquiring data from the LRAUV testbed.**

## Overview ##
The Persistence testbed is used to develop advanced AUV health monitoring algorithms. It consists of a benchtop-mounted frame containing most of the LRAUV actuators, a series of National Instrument DAQs to collect actuator performance data, and a Python process that controls both actuator motion and data logging. The ultimate objective of this project is to collect data on all LRAUV actuators.

## Mass-shifter ##
Data acquisition on the mass-shifter (aka pitch-pack) is complete. Figure 1 shows the layout:

***Figure 1: Mass-shifter schematics***
![mass shifter.png](https://bitbucket.org/repo/oG65MB/images/2424408676-mass%20shifter.png)

* The mass-shifter consists of a large mass attached to a lead screw driven by a DC brushed motor attached to an 84:1 gear-reduction head. The motor’s commanded position is sent by Python to the motor controller, and actuator performance is measured by five (external) sensors: an absolute mass position string potentiometer, a high-rate motor current sensor, a high-rate motor voltage sensor, and 2 piezo-accelerometers. Data is acquired by three National Instrument DAQs (Compact-DAQ 9227, 9229, 9234) synchronized by a NI-cDAQ 9174 chassis.

* Data acquisition is done by a Labview VI running on a Windows 7 laptop. Logging is commanded by the Python process over a ZMQ socket.

* Data generated by the tested's internal sensors is also collected: motor speed, load-control board voltage, and load-control board current. This data, generated at a rate of order 1Hz, is read by the Python process and passed to Labview over a ZMQ socket.

All data is stored in a TDMS file.

## Thruster ##
Data acquisition on the thruster is complete. Figure 2 shows the layout:

***Figure 2: Thruster schematics***
![thruster.png](https://bitbucket.org/repo/oG65MB/images/1696672826-thruster.png)


* The thruster consists of a shaft connected to a direct-drive DC brushless motor through a magnetic coupler. Load on the shaft is controlled by a dynamometer. The motor’s commanded speed is sent by Python to the motor controller. Actuator performance is measured by three (external) sensors: a high-rate motor current sensor, a high-rate motor voltage sensor, and a single piezo-accelerometer. Data is acquired by the same National Instruments DAQs (Compact-DAQ 9227, 9229, 9234) synchronized by a NI-cDAQ 9174 chassis.

* As with the mass-shifter, the Labview VI runs on a Windows laptop, and logging is commanded by the Python process over a ZMQ socket.

* Data generated by the tested's internal sensors is also collected: commanded and actual motor speed, load-control board voltage, and load-control board current. Additionally, the applied torque is pulled from the dyno. All this data, generated at a rate of order 1Hz, is read by the Python process, and passed to Labview over a ZMQ socket.

All data is stored in a TDMS file.

## Rudder/Elevator ##
Data acquisition on the rudder/elevator is underway. The layout is similar to the thruster's.

* Elevator and rudder are identical. They each consists of a shaft connected to a DC brushless motor through a gearbox/screw combination. The motor’s commanded position is sent by Python to the motor controller. Actuator performance is measured by four (external) sensors: a high-rate motor current sensor, a high-rate motor voltage sensor, the actuator's stringpot, and a single piezo-accelerometer. Data is acquired by the same National Instruments DAQs (Compact-DAQ 9227, 9229, 9234) synchronized by a NI-cDAQ 9174 chassis.

* As with the mass-shifter and thruster, the Labview VI runs on a Windows laptop, and logging is commanded by the Python process over a ZMQ socket.

* Data generated by the tested's internal sensors is also collected: load-control board voltage, load-control board current, commanded position, and state. This data, generated at a rate of order 1Hz, is read by the Python process, and passed to Labview over a ZMQ socket.
